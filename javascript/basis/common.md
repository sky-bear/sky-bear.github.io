# 常见知识

<script setup>
import Image from "../../components/Image/index.vue"
</script>

## async defer preload prefetch

1. async (异步)
   - 解析时机：当浏览器遇到带有 async 属性的 `<script> `标签时，它会立即开始并行下载该脚本文件，而不阻塞 HTML 文档的解析。<br />
   然而，一旦异步脚本下载完成，它会立即执行，此时可能会暂停HTML解析。这是因为当一个 async 脚本被执行时，它需要占用JavaScript引擎来执行其代码，这期间其他任务（包括HTML解析）会被暂时搁置。但这通常不会造成显著的影响，除非脚本执行时间非常长
   - 执行时机：一旦脚本下载完成，它就会立即执行，这可能是在 HTML 解析之前、期间或之后发生，具体取决于下载完成的时间点。
   - 适用场景：async 适合用于那些不依赖于其他脚本且其自身也不影响页面内容生成（例如广告或分析代码）的脚本。由于脚本可能会在文档解析前被执行，因此不适合需要操作 DOM 的脚本。
2. defer (延迟)

   - 解析时机：与 async 类似，defer 也允许脚本文件并行下载，同时不会阻塞 HTML 文档的解析。
     执行时机：但是，带有 defer 属性的脚本会在整个 HTML 文档完全解析之后，但在 DOMContentLoaded 事件触发之前执行。这意味着所有的 defer 脚本将按照它们出现在文档中的顺序依次执行。
   - 适用场景：defer 适用于那些需要在 DOM 完全加载后运行的脚本，比如那些要操作 DOM 或者需要确保在所有 HTML 元素都已解析完毕后的脚本。
     ::: warning

     - 执行顺序：如果页面中有多个带有 async 属性的脚本，它们的执行顺序是不确定的，因为每个脚本都会在其下载完成后立即执行。而带有 defer 属性的脚本会按照它们在文档中出现的顺序执行。
     - DOM 操作：async 脚本可以在 DOM 尚未完全构建时就执行，这可能导致错误，特别是当脚本试图访问尚未加载的元素时。defer 脚本则保证了在 DOM 构建完成后执行，从而避免了这类问题。

     :::

3. preload：提前下载，需要的时候立即执行，无需再下载
4. prefetch：提前下载，在未来的某个页面可能会执行，节省下载时间
